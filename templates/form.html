<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de AnÃºncio de Frete</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      padding: 2rem;
      background-color: #f8f9fa;
    }
    .result-box {
      background: #fff;
      border-radius: 8px;
      padding: 2rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      margin-top: 2rem;
    }
    .btn-custom {
      background-color: #28a745;
      color: white;
    }
    .btn-custom:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>
  <h1 class="mb-4"><span>ðŸš›</span> Gerador de AnÃºncio de Frete</h1>

  <form id="freteForm">
    <div class="row mb-3">
      <div class="col-md-3">
        <input type="text" class="form-control" name="produto" placeholder="Produto/Carga" required>
      </div>
      <div class="col-md-2">
        <input type="number" class="form-control" name="quantidade" placeholder="Quantidade" required>
      </div>
      <div class="col-md-3">
        <input type="number" class="form-control" name="peso_unitario" step="0.01" placeholder="Peso por unidade (kg)" required>
      </div>
      <div class="col-md-2">
        <input type="number" class="form-control" name="altura" step="0.01" placeholder="Altura (cm)" required>
      </div>
      <div class="col-md-2">
        <input type="number" class="form-control" name="comprimento" step="0.01" placeholder="Comprimento (cm)" required>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-2">
        <input type="number" class="form-control" name="largura" step="0.01" placeholder="Largura (cm)" required>
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" name="origem" placeholder="Origem" required>
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" name="destino" placeholder="Destino" required>
      </div>
      <div class="col-md-2">
        <input type="number" class="form-control" name="valor_nf" placeholder="Valor da carga (R$)" required>
      </div>
      <div class="col-md-2">
        <input type="date" class="form-control" name="data_retirada" required>
      </div>
    </div>

    <div class="mb-3">
      <textarea class="form-control" name="observacoes" placeholder="ObservaÃ§Ãµes" rows="2"></textarea>
    </div>

    <button type="submit" class="btn btn-custom">âž• Gerar AnÃºncio</button>
  </form>

  <div id="resultado" class="result-box mt-4" style="display:none;"></div>

  <script>
    document.getElementById("freteForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const formData = new FormData(this);
      const data = {};
      formData.forEach((value, key) => {
        data[key] = value;
      });

      const response = await fetch("/simular", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });

      const html = await response.text();
      document.getElementById("resultado").style.display = "block";
      document.getElementById("resultado").innerHTML = html;
    });
  </script>
</body>
</html>
